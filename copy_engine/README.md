# copy_engine — 刺さるショート動画原稿 マルチエージェント生成システム

## フォルダ構成

```
copy_engine/
├── README.md          ← このファイル（使い方・フロー全体説明）
├── analysis.md        ← なぜ刺さるのかの完全分析（必読）
├── generate.py        ← マルチエージェント生成スクリプト
└── output/            ← 生成された原稿の保存先（自動作成）
    ├── *.txt          ← 読みやすいテキスト版
    └── *.json         ← 全エージェントの出力を含む詳細ログ
```

---

## セットアップ

```bash
# 1. 依存ライブラリのインストール
pip install openai python-dotenv

# 2. .envにOpenAI APIキーを設定（プロジェクトルートの.envを使用）
#    OPENAI_API_KEY=sk-...
```

---

## 使い方

```bash
cd remotion_project/copy_engine

# 基本的な使い方
python generate.py --theme "寝る前の習慣で人生が変わる話"

# ラウンド数を3回に増やす（より精度が上がる）
python generate.py --theme "お金に好かれる人の共通点" --rounds 3

# モデルを変える（gpt-4o-mini で速く安く試す）
python generate.py --theme "人間関係をリセットしたい人へ" --model gpt-4o-mini
```

---

## マルチエージェントフロー

```
テーマ入力
    │
    ▼
┌───────────────────────────────────┐
│ ラウンド（最大N回）              │
│                                   │
│  [1] Drafter（ライター）          │
│      ↓ 3パターンの初稿           │
│      （共感型・衝撃型・ストーリー型） │
│                                   │
│  [2] Critic（批評家）             │
│      ↓ 離脱ポイント・弱点指摘    │
│                                   │
│  [3] Refiner（磨き屋）            │
│      ↓ 批評を反映した改善稿      │
│                                   │
│  [4] Devil's Advocate             │
│      ↓ 懐疑的な視聴者視点のチェック│
│                                   │
│  [5] Judge（審査員）              │
│      ↓ 7項目70点満点スコアリング │
│      55点以上 → 合格・次へ       │
│      55点未満 → 再ラウンド       │
└───────────────────────────────────┘
    │
    ▼
[6] Polisher（仕上げ屋）
    ↓ 言葉・リズム・余白の最終磨き
    │
    ▼
最終原稿 + スコアカード → output/ に保存
```

---

## 各エージェントの役割

| エージェント | 役割 | 温度設定 |
|------------|------|----------|
| **Drafter** | テーマから3パターンの初稿を生成 | 0.9（創造的） |
| **Critic** | 弱点・離脱ポイントを冷静に指摘 | 0.7 |
| **Refiner** | 批評を全て反映して大幅改善 | 0.85 |
| **Devil's Advocate** | 「絶対感動しない視聴者」として最厳格チェック | 0.7 |
| **Judge** | 7項目70点満点で採点・合否判定 | 0.5（厳格） |
| **Polisher** | 採用稿の言葉・リズムを最終調整 | 0.6 |

---

## 採点基準（7項目×10点 = 70点満点）

| 項目 | チェックポイント |
|------|----------------|
| フック力 | 最初の1文で続きを見たくなるか |
| 共感度 | 読者の状態を正確に描写できているか |
| リフレーミング力 | 意外な視点・真実を提示できているか |
| 解決策のシンプルさ | 誰でも今夜できるか |
| 具体性 | 抽象的でなく映像が浮かぶか |
| 変化の約束 | 希望を感じられるか |
| 締めの余韻 | 見終わった後に温かい気持ちになるか |

**55点以上 → 合格（採用）**
**54点以下 → 再ラウンド**

---

## 刺さる文章の骨格（7大要素）

詳細は [analysis.md](./analysis.md) を参照。

```
① フック     → 今この瞬間の読者状態を正確に描写する
② 共感       → 読者の内言語をそのまま代弁する
③ リフレーミング → 常識を覆す意外な真実を提示する
④ 解決策     → 超シンプルで「自分にもできる」行動を示す
⑤ 具体例     → 誰でも言える小さな例でリアリティを担保する
⑥ 約束       → 具体的な期間と変化のイメージを与える
⑦ 承認       → 読者の今日を肯定して温かく締める
```

---

## よくある使い方のパターン

### テーマのヒント

| カテゴリ | テーマ例 |
|---------|---------|
| 自己肯定 | 「今日頑張れなかった自分を許す方法」 |
| 習慣 | 「朝5分でできる運気の上げ方」 |
| 人間関係 | 「心が疲れる人間関係をそっと手放す方法」 |
| お金 | 「お金持ちが絶対にしない思考習慣」 |
| 恋愛 | 「好きな人に自然と選ばれる人の共通点」 |
| スピリチュアル | 「宇宙に願いが届く夜の過ごし方」 |
| 健康 | 「老けない人が毎朝やっている1つのこと」 |

### コスト目安（gpt-4o使用時）

- 1ラウンド：約0.3〜0.5ドル
- 2ラウンド：約0.6〜1.0ドル
- gpt-4o-miniで試作 → gpt-4oで本番という使い方がおすすめ
